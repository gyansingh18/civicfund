<div class="allocation-form-container">
  <h1>Allocate Your $1000 Budget</h1>

 <%= form_with url: allocations_path, method: :post, data: { controller: "budget", action: "submit->budget#submit" } do %>
  <div class="allocation-form-fields">
    <% @projects.each do |project| %>
      <div class="allocation-field">
        <label><%= project.name %> ($<%= project.cost %>)</label>
        <%= number_field_tag "allocations[#{project.id}]", 0,
              class: "allocation-input",
              data: { budget_target: "input", action: "input->budget#update" } %>
      </div>
    <% end %>

    <div class="allocation-totals">
      <p><strong>Total Allocated:</strong> $<span data-budget-target="total">0</span></p>
      <p><strong>Remaining:</strong> $<span data-budget-target="remaining">1000</span></p>
    </div>

    <%= submit_tag "Submit Allocation", class: "btn-submit" %>
  </div>
<% end %>

</div>
